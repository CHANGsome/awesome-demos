{"version":3,"sources":["components/VoiceControl/index.module.scss","img/voice.svg","components/VoiceControl/index.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","dragging","circles","lastDeg","lastX","VoiceControl","props","size","handleRef","useRef","useState","rotateDeg","setRotateDeg","useEffect","document","onmousemove","handleMove","onmouseup","e","current","offsetLeft","offsetTop","offsetHeight","transformOriginX","transformOriginY","det_x","clientX","det_y","clientY","deg","Math","atan","PI","className","styles","container","top","ref","handler","style","transform","onMouseDown","head","axis","anchor","voiceContainer","voiceDisplay","voiceNumber","voiceFill","borderBottomWidth","src","voice","alt","voiceLogo","bottom","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"iGACAA,EAAOC,QAAU,CAAC,UAAY,gCAAgC,IAAM,0BAA0B,QAAU,8BAA8B,OAAS,6BAA6B,KAAO,2BAA2B,KAAO,2BAA2B,eAAiB,qCAAqC,aAAe,mCAAmC,YAAc,kCAAkC,UAAY,gCAAgC,UAAY,gCAAgC,OAAS,+B,+HCD1d,MAA0B,kC,OCIrCC,GAAW,EACXC,EAAU,EACVC,EAAU,EACVC,EAAQ,EA0GGC,EAtG2B,SAACC,GAAW,IAAD,EAC7BA,EAAdC,YAD2C,MACpC,GADoC,EAE7CC,EAAYC,iBAAuB,MAFU,EAGjBC,mBAAiB,GAHA,mBAG5CC,EAH4C,KAGjCC,EAHiC,KAKnDC,qBAAU,WAIR,OAFAC,SAASC,YAAcC,EACvBF,SAASG,UAAY,kBAAOhB,GAAW,GAChC,WACLa,SAASC,YAAc,KACvBD,SAASG,UAAY,QAEtB,IAEH,IAAMD,EAAa,SAACE,GAClB,GAAKjB,GAAaO,EAAUW,QAA5B,CADoC,MAIO,CACzCX,EAAUW,QAAQC,WAClBZ,EAAUW,QAAQE,UAAYb,EAAUW,QAAQG,cAF7CC,EAJ+B,KAIbC,EAJa,KAQ/BC,EACHP,EAAEQ,QAAUH,EADFI,EAEVH,EAAmBN,EAAEU,QAEnBC,EAAM,EACNF,EAAQ,GAGVE,EAAMC,KAAKC,KAAKN,EAAQE,IAAUG,KAAKE,GAAK,KACxCP,EAAQ,IACVI,GAAO,MAEU,IAAVF,EAELF,EAAQ,EACVI,EAAM,GACGJ,EAAQ,IACjBI,EAAM,KAECF,EAAQ,IAEjBE,EAAMC,KAAKC,KAAKN,EAAQE,IAAUG,KAAKE,GAAK,KAAO,KAIjDL,EAAQ,IACNT,EAAEQ,QAAUtB,GAASyB,EAAM1B,GAAW0B,EAAM,IAAM3B,EAAU,IAM9DA,IAEAgB,EAAEQ,QAAUtB,GACZyB,EAAM1B,GACN,IAAM0B,EAAM,IACZ3B,EAAU,GAGVA,KAGJU,EAAaiB,GACb1B,EAAU0B,EACVzB,EAAQc,EAAEQ,UAEZ,OACE,sBAAKO,UAAWC,IAAOC,UAAvB,UACE,sBAAKF,UAAWC,IAAOE,IAAvB,UACE,sBACEC,IAAK7B,EACLyB,UAAWC,IAAOI,QAClBC,MAAO,CAAEC,UAAU,UAAD,OAAY7B,EAAZ,SAClB8B,YAAa,kBAAOxC,GAAW,GAJjC,UAME,qBAAKgC,UAAWC,IAAOQ,OAGvB,qBAAKT,UAAWC,IAAOS,OACvB,qBAAKV,UAAWC,IAAOU,YAEzB,sBAAKX,UAAWC,IAAOW,eAAvB,UACE,sBAAKZ,UAAWC,IAAOY,aAAvB,UACE,sBAAKb,UAAWC,IAAOa,YAAvB,cAAsC7C,KACtC,qBACE+B,UAAWC,IAAOc,UAClBT,MAAO,CAAEU,kBAAkB,GAAD,OAAY,IAAP1C,EAAcL,EAAnB,YAG9B,qBAAKgD,IAAKC,EAAOC,IAAI,QAAQnB,UAAWC,IAAOmB,kBAInD,qBAAKpB,UAAWC,IAAOoB,aCjGdC,MARf,WACE,OACE,qBAAKtB,UAAU,MAAf,SACE,cAAC,EAAD,OCQSuB,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFrD,SAASsD,eAAe,SAE1BZ,M","file":"static/js/main.7be1dfdd.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"VoiceControl_container__1O57l\",\"top\":\"VoiceControl_top__2YrSR\",\"handler\":\"VoiceControl_handler__TEZT_\",\"anchor\":\"VoiceControl_anchor__2FQnK\",\"head\":\"VoiceControl_head__-thKl\",\"axis\":\"VoiceControl_axis__3Rojz\",\"voiceContainer\":\"VoiceControl_voiceContainer__2UMIo\",\"voiceDisplay\":\"VoiceControl_voiceDisplay__14lGb\",\"voiceNumber\":\"VoiceControl_voiceNumber__2jJ0y\",\"voiceFill\":\"VoiceControl_voiceFill__CU_vX\",\"voiceLogo\":\"VoiceControl_voiceLogo__18jv4\",\"bottom\":\"VoiceControl_bottom__RF4y-\"};","export default __webpack_public_path__ + \"static/media/voice.9d1147f6.svg\";","import React, { useEffect, useRef, useState } from 'react';\nimport styles from './index.module.scss';\nimport voice from 'img/voice.svg';\n\nlet dragging = false;\nlet circles = 0;\nlet lastDeg = 0;\nlet lastX = 0;\ntype PropsType = {\n  size?: number;\n};\nconst VoiceControl: React.FC<PropsType> = (props) => {\n  const { size = 10 } = props;\n  const handleRef = useRef<HTMLDivElement>(null);\n  const [rotateDeg, setRotateDeg] = useState<number>(0);\n\n  useEffect(() => {\n    // 将mousemove和mouseup绑定在document上，这样拖拽元素时鼠标飞出去事件也不会丢失\n    document.onmousemove = handleMove; // 鼠标移动\n    document.onmouseup = () => (dragging = false); // 鼠标抬起\n    return () => {\n      document.onmousemove = null;\n      document.onmouseup = null;\n    };\n  }, []);\n\n  const handleMove = (e: MouseEvent) => {\n    if (!dragging || !handleRef.current) {\n      return;\n    }\n    let [transformOriginX, transformOriginY] = [\n      handleRef.current.offsetLeft,\n      handleRef.current.offsetTop + handleRef.current.offsetHeight,\n    ];\n    let [det_x, det_y] = [\n      e.clientX - transformOriginX,\n      transformOriginY - e.clientY,\n    ];\n    let deg = 0;\n    if (det_y > 0) {\n      // 第一、四象限\n      // 根据tan值计算角度\n      deg = Math.atan(det_x / det_y) / (Math.PI / 180);\n      if (det_x < 0) {\n        deg += 360;\n      }\n    } else if (det_y === 0) {\n      // x轴\n      if (det_x > 0) {\n        deg = 90;\n      } else if (det_x < 0) {\n        deg = 270;\n      }\n    } else if (det_y < 0) {\n      //第二、三象限，都是正值90～270度\n      deg = Math.atan(det_x / det_y) / (Math.PI / 180) + 180;\n      if (det_x < 0) {\n      }\n    }\n    if (det_y > 0) {\n      if (e.clientX > lastX && deg < lastDeg && deg < 10 && circles < 100) {\n        // 其实判断deg===0的时候直接加1最好，但是因为转动太快有掉帧的问题，有些坐标和角度获取不到\n        // 加1的条件：1.deg 从 359->0: 在顺时针旋转的时候因为deg一直时递增的（0增到359+），所以当前deg小于上一次deg的时候就是从第四象限跳到第一象限的时候\n        //          2.顺时针旋转：\n        //          （1）当前X坐标大于上一次坐标（不一定能满足，因为mousemove绑定在document上，有时候拖拽鼠标会往回移动）\n        //          （2）所以加一个条件一起判断是否顺时针：deg < 10，只在离y正半轴10度的地方判断\n        circles++;\n      } else if (\n        e.clientX < lastX &&\n        deg > lastDeg &&\n        360 - deg < 10 &&\n        circles > 0\n      ) {\n        // 减1的条件：1. 逆时针旋转；2.从第1象限跳到第四象限的那个时候\n        circles--;\n      }\n    }\n    setRotateDeg(deg);\n    lastDeg = deg;\n    lastX = e.clientX;\n  };\n  return (\n    <div className={styles.container}>\n      <div className={styles.top}>\n        <div\n          ref={handleRef}\n          className={styles.handler}\n          style={{ transform: `rotate(${rotateDeg}deg)` }}\n          onMouseDown={() => (dragging = true)} // 鼠标按下\n        >\n          <div className={styles.head}>\n            {/* <img src={require('/img/Jennie2.jpg')} alt=\"head\" /> */}\n          </div>\n          <div className={styles.axis}></div>\n          <div className={styles.anchor}></div>\n        </div>\n        <div className={styles.voiceContainer}>\n          <div className={styles.voiceDisplay}>\n            <div className={styles.voiceNumber}> {circles}</div>\n            <div\n              className={styles.voiceFill}\n              style={{ borderBottomWidth: `${size * 0.14 * circles}px` }}\n            ></div>\n          </div>\n          <img src={voice} alt=\"voice\" className={styles.voiceLogo} />\n        </div>\n      </div>\n\n      <div className={styles.bottom}></div>\n    </div>\n  );\n};\n\nexport default VoiceControl;\n","import React from 'react';\nimport InvoiceControl from 'components/VoiceControl';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <InvoiceControl />\n    </div>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\nreportWebVitals();\n"],"sourceRoot":""}